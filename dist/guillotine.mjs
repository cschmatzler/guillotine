var ht=(t,n=[])=>({parts:(...e)=>{if(Ni(n))return ht(t,e);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...e)=>ht(t,[...n,...e]),rename:e=>ht(e,n),keys:()=>n,build:()=>[...new Set(n)].reduce((e,i)=>Object.assign(e,{[i]:{selector:[`&[data-scope="${At(t)}"][data-part="${At(i)}"]`,`& [data-scope="${At(t)}"][data-part="${At(i)}"]`].join(", "),attrs:{"data-scope":At(t),"data-part":At(i)}}}),{})}),At=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Ni=t=>t.length===0;var V=t=>t?"":void 0;var k=t=>typeof t=="object"&&t?.nodeType===Node.ELEMENT_NODE&&typeof t?.nodeName=="string",Xe=t=>t.nodeType===Node.DOCUMENT_NODE,ki=t=>t!=null&&t===t.window;var Di=t=>t.nodeType!==void 0,_i=t=>t&&Di(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t;function J(t,n){return!t||!n||!k(t)||!k(n)?!1:t===n||t.contains(n)}function gt(t){return Xe(t)?t:ki(t)?t.document:t?.ownerDocument??document}function pt(t){return _i(t)?pt(t.host):Xe(t)?t.defaultView??window:k(t)?t.ownerDocument?.defaultView??window:window}var Ut=()=>typeof document<"u";function Vi(){return navigator.userAgentData?.platform??navigator.platform}var Ue=t=>Ut()&&t.test(Vi()),Fi=t=>Ut()&&t.test(navigator.userAgent),Bi=t=>Ut()&&t.test(navigator.vendor),Hi=()=>Ut()&&!!navigator.maxTouchPoints,je=()=>Ue(/^Mac/)&&!Hi(),ze=()=>Je()&&Bi(/apple/i),qe=()=>Fi(/firefox\//i),Je=()=>Ue(/mac|iphone|ipad|ipod/i);function Z(t){return t.composedPath?.()[0]??t.target}var Ze=t=>J(t.currentTarget,Z(t));function Te(t){let n=t.currentTarget;if(!n)return!1;let e=Je();if(e&&!t.metaKey||!e&&!t.ctrlKey)return!1;let i=n.localName;return i==="a"||i==="button"&&n.type==="submit"||i==="input"&&n.type==="submit"}function Pe(t){let n=t.currentTarget;if(!n)return!1;let e=n.localName;return t.altKey?e==="a"||e==="button"&&n.type==="submit"||e==="input"&&n.type==="submit":!1}var Se=t=>t.id;function Wi(t,n,e=Se){return t.find(i=>e(i)===n)}function Ae(t,n,e=Se){let i=Wi(t,n,e);return i?t.indexOf(i):-1}function jt(t,n,e=!0){let i=Ae(t,n);return i=e?(i+1)%t.length:Math.min(i+1,t.length-1),t[i]}function zt(t,n,e=!0){let i=Ae(t,n);return i===-1?e?t[t.length-1]:null:(i=e?(i-1+t.length)%t.length:Math.max(0,i-1),t[i])}var Yi=t=>t.split("").map(n=>{let e=n.charCodeAt(0);return e>0&&e<128?n:e>=128&&e<=255?`/x${e.toString(16)}`.replace("/","\\"):""}).join("").trim(),Gi=t=>Yi(t.dataset.valuetext??t.textContent??""),$i=(t,n)=>t.trim().toLowerCase().startsWith(n.toLowerCase()),Ki=(t,n)=>t.map((e,i)=>t[(Math.max(n,0)+i)%t.length]);function Xi(t,n,e,i=Se){let r=e?Ae(t,e,i):-1,o=e?Ki(t,r):t;return n.length===1&&(o=o.filter(a=>i(a)!==e)),o.find(a=>$i(Gi(a),n))}function Ui(t,n){let{state:e,activeId:i,key:r,timeout:o=350,itemToId:s}=n,a=e.keysSoFar+r,l=a.length>1&&Array.from(a).every(g=>g===a[0])?a[0]:a,d=t.slice(),h=Xi(d,l,i,s);function c(){clearTimeout(e.timer),e.timer=-1}function f(g){e.keysSoFar=g,c(),g!==""&&(e.timer=+setTimeout(()=>{f(""),c()},o))}return f(a),h}var qt=Object.assign(Ui,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:ji});function ji(t){return t.key.length===1&&!t.ctrlKey&&!t.metaKey}var Qe=t=>typeof t=="object"&&t!==null&&t.nodeType===1,zi=t=>Qe(t)&&t.tagName==="IFRAME";function qi(t){return Qe(t)?t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0:!1}function Ji(t){return parseInt(t.getAttribute("tabindex")||"0",10)<0}var tn="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type";function Jt(t){return!t||t.closest("[inert]")?!1:t.matches(tn)&&qi(t)}function Re(t,n){if(!t)return[];let e=Array.from(t.querySelectorAll(tn)),i=e.filter(Ke);return n&&Ke(t)&&i.unshift(t),i.forEach((r,o)=>{if(zi(r)&&r.contentDocument){let s=r.contentDocument.body,a=Re(s);i.splice(o,1,...a)}}),!i.length&&n?e:i}function Ke(t){return t!=null&&t.tabIndex>0?!0:Jt(t)&&!Ji(t)}function en(t,n){let[e]=Re(t,n);return e||null}function Zi(t,n){let e=Re(t,n),i=e[0]||null,r=e[e.length-1]||null;return[i,r]}function nn(t){let n=t.currentTarget;if(!n)return!1;let[e,i]=Zi(n),r=n.ownerDocument||document;return!(r.activeElement===e&&t.shiftKey||r.activeElement===i&&!t.shiftKey||!e&&!i)}function Zt(t){if(t==null||!k(t))return!1;try{let n=pt(t);return t instanceof n.HTMLInputElement&&t.selectionStart!=null||/(textarea|select)/.test(t.localName)||t.isContentEditable}catch{return!1}}var Qi=/auto|scroll|overlay|hidden|clip/;function tr(t){let n=pt(t),{overflow:e,overflowX:i,overflowY:r,display:o}=n.getComputedStyle(t);return Qi.test(e+r+i)&&!["inline","contents"].includes(o)}function B(t){let n=globalThis.requestAnimationFrame(t);return()=>{globalThis.cancelAnimationFrame(n)}}function er(t,n){if(!t)return;let{attributes:e,callback:i}=n,r=t.ownerDocument.defaultView||window,o=new r.MutationObserver(s=>{for(let a of s)a.type==="attributes"&&a.attributeName&&e.includes(a.attributeName)&&i(a)});return o.observe(t,{attributes:!0,attributeFilter:e}),()=>o.disconnect()}function rn(t,n){let{defer:e}=n,i=e?B:o=>o(),r=[];return r.push(i(()=>{let o=typeof t=="function"?t():t;r.push(er(o,n))})),()=>{r.forEach(o=>o?.())}}function Qt(t,n){return Array.from(t?.querySelectorAll(n)??[])}function te(t){let n={getRootNode:e=>e.getRootNode?.()??document,getDoc:e=>gt(n.getRootNode(e)),getWin:e=>n.getDoc(e).defaultView??window,getActiveElement:e=>n.getDoc(e).activeElement,isActiveElement:(e,i)=>i===n.getActiveElement(e),getById:(e,i)=>n.getRootNode(e).getElementById(i),setValue:(e,i)=>{if(e==null||i==null)return;let r=i.toString();e.value!==r&&(e.value=i.toString())}};return{...n,...t}}function nr(t){return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}function on(t,n){let{rootEl:e,...i}=n||{};!t||!e||!tr(e)||!nr(e)||t.scrollIntoView(i)}var Oe=new WeakMap;function ir(t,n,e){Oe.has(t)||Oe.set(t,new Map);let i=Oe.get(t),r=i.get(n);if(!r)return i.set(n,e()),()=>{i.get(n)?.(),i.delete(n)};let o=e(),s=()=>{o(),r(),i.delete(n)};return i.set(n,s),()=>{i.get(n)===s&&(o(),i.set(n,r))}}function sn(t,n){return t?ir(t,"style",()=>{let i=t.style.cssText;return Object.assign(t.style,n),()=>{t.style.cssText=i}}):()=>{}}var rr=1e3/60;function or(t,n){let e=t();if(k(e)&&e.isConnected)return n(e),()=>{};{let i=setInterval(()=>{let r=t();k(r)&&r.isConnected&&(n(r),clearInterval(i))},rr);return()=>clearInterval(i)}}function cn(t,n){let e=[];return t?.forEach(i=>{let r=or(i,n);e.push(r)}),()=>{e.forEach(i=>i())}}var mt=(t,n,e,i)=>{let r=typeof t=="function"?t():t;return r?.addEventListener(n,e,i),()=>{r?.removeEventListener(n,e,i)}};function ln(t){return t.key.length===1&&!t.ctrlKey&&!t.metaKey}var ee=t=>t.button===0,ne=t=>t.button===2||je()&&t.ctrlKey&&t.button===0,un=t=>t.ctrlKey||t.altKey||t.metaKey;function sr(t,n,e){let r=(s=>{let a=requestAnimationFrame(s);return()=>cancelAnimationFrame(a)})(()=>{t.removeEventListener(n,o,!0),e()}),o=()=>{r(),e()};return t.addEventListener(n,o,{once:!0,capture:!0}),r}function cr(t){return t?.matches("a[href]")??!1}function Ie(t){if(!cr(t))return;let n=()=>t.click();qe()?sr(t,"keyup",n):queueMicrotask(n)}function Ce(t,n,e){if(!t)return;let i=t.ownerDocument.defaultView||window,r=new i.CustomEvent(n,e);return t.dispatchEvent(r)}var ar={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},an={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function kt(t,n={}){let{dir:e="ltr",orientation:i="horizontal"}=n,{key:r}=t;return r=ar[r]??r,e==="rtl"&&i==="horizontal"&&r in an&&(r=an[r]),r}function lr(t,n="client"){let e=t.touches[0]||t.changedTouches[0];return{x:e[`${n}X`],y:e[`${n}Y`]}}function ur(t,n="client"){return{x:t[`${n}X`],y:t[`${n}Y`]}}var fr=t=>"touches"in t&&t.touches.length>0;function ie(t,n="client"){return fr(t)?lr(t,n):ur(t,n)}function Rt(t){return t.nativeEvent??t}var re=t=>t[0],oe=t=>t[t.length-1];var dn=(t,...n)=>t.concat(n),hn=(t,n)=>t.filter(e=>e!==n);var fn=t=>t?.constructor.name==="Array",It=(t,n)=>{if(Object.is(t,n))return!0;if(t==null&&n!=null||t!=null&&n==null)return!1;if(typeof t?.isEqual=="function"&&typeof n?.isEqual=="function")return t.isEqual(n);if(typeof t=="function"&&typeof n=="function")return t.toString()===n.toString();if(fn(t)&&fn(n))return Array.from(t).toString()===Array.from(n).toString();if(typeof t!="object"||typeof n!="object")return!1;let e=Object.keys(n??Object.create(null)),i=e.length;for(let r=0;r<i;r++)if(!Reflect.has(t,e[r]))return!1;for(let r=0;r<i;r++){let o=e[r];if(!It(t[o],n[o]))return!1}return!0},gn=(t,...n)=>(typeof t=="function"?t(...n):t)??void 0,pn=t=>t,mn=()=>{},Me=(...t)=>(...n)=>{t.forEach(function(e){e?.(...n)})};var yn=t=>typeof t=="function",vn=t=>t==null;function yt(t){if(!dr(t)||t===void 0)return t;let n=Reflect.ownKeys(t).filter(i=>typeof i=="string"),e={};for(let i of n){let r=t[i];r!==void 0&&(e[i]=yt(r))}return e}var dr=t=>t&&typeof t=="object"&&t.constructor===Object;function hr(t,n){let e={},i={},r=new Set(n);for(let o in t)r.has(o)?i[o]=t[o]:e[o]=t[o];return[i,e]}var nt=t=>function(e){return hr(e,t)};function se(...t){let n=t.length===1?t[0]:t[1],e=t.length===2?t[0]:!0}var is=Symbol(),gr=Symbol();var En=Object.getPrototypeOf,Le=new WeakMap,pr=t=>t&&(Le.has(t)?Le.get(t):En(t)===Object.prototype||En(t)===Array.prototype);var xn=t=>pr(t)&&t[gr]||null,Ne=(t,n=!0)=>{Le.set(t,n)};function mr(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function wn(t,n){let e=mr();return e?(e[t]||(e[t]=n()),e[t]):n()}var ce=!1,ke=t=>typeof t=="object"&&t!==null,vt=wn("__zag__proxyStateMap",()=>new WeakMap),Dt=wn("__zag__refSet",()=>new WeakSet),yr=(t=Object.is,n=(l,d)=>new Proxy(l,d),e=l=>ke(l)&&!Dt.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),i=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},r=new WeakMap,o=(l,d,h=i)=>{let c=r.get(l);if(c?.[0]===d)return c[1];let f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return Ne(f,!0),r.set(l,[d,f]),Reflect.ownKeys(l).forEach(g=>{let y=Reflect.get(l,g);Dt.has(y)?(Ne(y,!1),f[g]=y):y instanceof Promise?Object.defineProperty(f,g,{get(){return h(y)}}):vt.has(y)?f[g]=lt(y,h):f[g]=y}),Object.freeze(f)},s=new WeakMap,a=[1,1],u=l=>{if(!ke(l))throw new Error("object required");let d=s.get(l);if(d)return d;let h=a[0],c=new Set,f=(P,b=++a[0])=>{h!==b&&(h=b,c.forEach(T=>T(P,b)))},g=a[1],y=(P=++a[1])=>(g!==P&&!c.size&&(g=P,p.forEach(([b])=>{let T=b[1](P);T>h&&(h=T)})),h),m=P=>(b,T)=>{let A=[...b];A[1]=[P,...A[1]],f(A,T)},p=new Map,E=(P,b)=>{if(ce&&p.has(P))throw new Error("prop listener already exists");if(c.size){let T=b[3](m(P));p.set(P,[b,T])}else p.set(P,[b])},w=P=>{let b=p.get(P);b&&(p.delete(P),b[1]?.())},O=P=>(c.add(P),c.size===1&&p.forEach(([T,A],G)=>{if(ce&&A)throw new Error("remove already exists");let C=T[3](m(G));p.set(G,[T,C])}),()=>{c.delete(P),c.size===0&&p.forEach(([T,A],G)=>{A&&(A(),p.set(G,[T]))})}),S=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),L=n(S,{deleteProperty(P,b){let T=Reflect.get(P,b);w(b);let A=Reflect.deleteProperty(P,b);return A&&f(["delete",[b],T]),A},set(P,b,T,A){let G=Reflect.has(P,b),C=Reflect.get(P,b,A);if(G&&(t(C,T)||s.has(T)&&t(C,s.get(T))))return!0;w(b),ke(T)&&(T=xn(T)||T);let N=T;if(!Object.getOwnPropertyDescriptor(P,b)?.set)if(T instanceof Promise)T.then(M=>{Object.assign(T,{status:"fulfilled",value:M}),f(["resolve",[b],M])}).catch(M=>{Object.assign(T,{status:"rejected",reason:M}),f(["reject",[b],M])});else{!vt.has(T)&&e(T)&&(N=_t(T));let M=!Dt.has(N)&&vt.get(N);M&&E(b,M)}return Reflect.set(P,b,N,A),f(["set",[b],T,C]),!0}});s.set(l,L);let Y=[S,y,o,O];return vt.set(L,Y),Reflect.ownKeys(l).forEach(P=>{let b=Object.getOwnPropertyDescriptor(l,P);b.get||b.set?Object.defineProperty(S,P,b):L[P]=l[P]}),L})=>[u,vt,Dt,t,n,e,i,r,o,s,a],[vr]=yr();function _t(t={}){return vr(t)}function ae(t,n,e){let i=vt.get(t);ce&&!i&&console.warn("Please use proxy object");let r,o=[],s=i[3],a=!1,l=s(d=>{if(o.push(d),e){n(o.splice(0));return}r||(r=Promise.resolve().then(()=>{r=void 0,a&&n(o.splice(0))}))});return a=!0,()=>{a=!1,l()}}function lt(t,n){let e=vt.get(t);ce&&!e&&console.warn("Please use proxy object");let[i,r,o]=e;return o(i,r(),n)}function ut(t){return Dt.add(t),t}function bn(t,n){Object.keys(n).forEach(r=>{if(Object.getOwnPropertyDescriptor(t,r))throw new Error("object property already defined");let o=n[r],{get:s,set:a}=typeof o=="function"?{get:o}:o,u={};u.get=()=>s(lt(i)),a&&(u.set=l=>a(i,l)),Object.defineProperty(t,r,u)});let i=_t(t);return i}function On(t,n,e){typeof e.value=="object"&&(e.value=Et(e.value)),!e.enumerable||e.get||e.set||!e.configurable||!e.writable||n==="__proto__"?Object.defineProperty(t,n,e):t[n]=e.value}function Et(t){if(typeof t!="object")return t;var n=0,e,i,r,o=Object.prototype.toString.call(t);if(o==="[object Object]"?r=Object.create(t.__proto__||null):o==="[object Array]"?r=Array(t.length):o==="[object Set]"?(r=new Set,t.forEach(function(s){r.add(Et(s))})):o==="[object Map]"?(r=new Map,t.forEach(function(s,a){r.set(Et(a),Et(s))})):o==="[object Date]"?r=new Date(+t):o==="[object RegExp]"?r=new RegExp(t.source,t.flags):o==="[object DataView]"?r=new t.constructor(Et(t.buffer)):o==="[object ArrayBuffer]"?r=t.slice(0):o.slice(-6)==="Array]"&&(r=new t.constructor(t)),r){for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)On(r,i[n],Object.getOwnPropertyDescriptor(t,i[n]));for(n=0,i=Object.getOwnPropertyNames(t);n<i.length;n++)Object.hasOwnProperty.call(r,e=i[n])&&r[e]===t[e]||On(r,e,Object.getOwnPropertyDescriptor(t,e))}return r||t}var Er=Object.defineProperty,xr=(t,n,e)=>n in t?Er(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,v=(t,n,e)=>(xr(t,typeof n!="symbol"?n+"":n,e),e);function wr(t){for(;t.length>0;)t.pop();return t}var Tn=(t,...n)=>(typeof t=="function"?t(...n):t)??void 0,it=t=>t,br=()=>{},Or=(...t)=>(...n)=>{t.forEach(function(e){e?.(...n)})},Pn=(()=>{let t=0;return()=>(t++,t.toString(36))})(),Tr=()=>!1,ue=t=>Array.isArray(t),Ft=t=>!(t==null||typeof t!="object"||ue(t)),Pr=t=>typeof t=="number"&&!Number.isNaN(t),H=t=>typeof t=="string",fe=t=>typeof t=="function",Sr=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);function de(t){if(!Ar(t)||t===void 0)return t;let n=Reflect.ownKeys(t).filter(i=>typeof i=="string"),e={};for(let i of n){let r=t[i];r!==void 0&&(e[i]=de(r))}return e}var Ar=t=>t&&typeof t=="object"&&t.constructor===Object;function De(...t){let n=t.length===1?t[0]:t[1],e=t.length===2?t[0]:!0}function le(...t){let n=t.length===1?t[0]:t[1],e=t.length===2?t[0]:!0}function Rn(t,...n){for(let e of n){let i=de(e);for(let r in i)Ft(e[r])?(t[r]||(t[r]={}),Rn(t[r],e[r])):t[r]=e[r]}return t}function Sn(t){return Et(t)}function U(t){return H(t)?{type:t}:t}function ft(t){return t?ue(t)?t.slice():[t]:[]}function In(t){return Ft(t)&&t.predicate!=null}var Rr=()=>!0;function Ve(t,n,e,i){return r=>H(r)?!!t[r]?.(n,e,i):fe(r)?r(n,e,i):r.predicate(t)(n,e,i)}function Ir(...t){return{predicate:n=>(e,i,r)=>t.map(Ve(n,e,i,r)).some(Boolean)}}function Cr(...t){return{predicate:n=>(e,i,r)=>t.map(Ve(n,e,i,r)).every(Boolean)}}function Mr(t){return{predicate:n=>(e,i,r)=>!Ve(n,e,i,r)(t)}}function Lr(...t){return(n,e,i)=>i.state.matches(...t)}var he={or:Ir,and:Cr,not:Mr,stateIn:Lr};function Cn(t,n){return t=t??Rr,(e,i,r)=>{if(H(t)){let o=n[t];return fe(o)?o(e,i,r):o}return In(t)?t.predicate(n)(e,i,r):t?.(e,i,r)}}function _e(t,n){return(e,i,r)=>In(t)?t.predicate(n)(e,i,r):t}function Nr(t){let n=t.computed??it({}),e=t.context??it({}),i=t.initial?t.states?.[t.initial]?.tags:[],r=_t({value:t.initial??"",previousValue:"",event:it({}),previousEvent:it({}),context:bn(e,n),done:!1,tags:i??[],hasTag(o){return this.tags.includes(o)},matches(...o){return o.includes(this.value)},can(o){return it(this).nextEvents.includes(o)},get nextEvents(){let o=t.states?.[this.value]?.on??{},s=t?.on??{};return Object.keys({...o,...s})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return it(r)}function Vt(t,n){return(e,i)=>{if(Pr(t))return t;if(fe(t))return t(e,i);if(H(t)){let r=Number.parseFloat(t);if(!Number.isNaN(r))return r;if(n){let o=n?.[t];return le(o==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${t}\`. It doesn't exist in \`options.delays\``),fe(o)?o(e,i):o}}}}function kr(t){return H(t)?{target:t}:t}function Dr(t,n){return(e,i,r)=>ft(t).map(kr).find(o=>Cn(o.guard,n)(e,i,r)??o.target??o.actions)}var _r=class{constructor(t,n){v(this,"status","Not Started"),v(this,"state"),v(this,"initialState"),v(this,"initialContext"),v(this,"id"),v(this,"type","machine"),v(this,"activityEvents",new Map),v(this,"delayedEvents",new Map),v(this,"stateListeners",new Set),v(this,"doneListeners",new Set),v(this,"contextWatchers",new Set),v(this,"removeStateListener",br),v(this,"parent"),v(this,"children",new Map),v(this,"guardMap"),v(this,"actionMap"),v(this,"delayMap"),v(this,"activityMap"),v(this,"sync"),v(this,"options"),v(this,"config"),v(this,"_created",()=>{let e=U("machine.created");this.executeActions(this.config?.created,e)}),v(this,"start",e=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=ae(this.state,()=>{this.stateListeners.forEach(u=>{u(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(U("machine.start"),ft(this.config.activities),"machine.start"),this.executeActions(this.config.entry,U("machine.start"));let i=U("machine.init"),r=Ft(e)?e.value:e,o=Ft(e)?e.context:void 0;o&&this.setContext(o);let s={target:r??this.config.initial},a=this.getNextStateInfo(s,i);return this.initialState=a,this.performStateChangeEffects(this.state.value,a,i),this}),v(this,"setupContextWatchers",()=>{let{watch:e}=this.config;if(!e)return;let i=lt(this.state.context),r=ae(this.state.context,()=>{let o=lt(this.state.context);for(let[s,a]of Object.entries(e))(this.options.compareFns?.[s]??Object.is)(i[s],o[s])||this.executeActions(a,this.state.event);i=o});this.contextWatchers.add(r)}),v(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,U("machine.stop")),this.executeActions(this.config.exit,U("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),v(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),v(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(e=>e()),this.contextWatchers.clear()}),v(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(e=>{e.forEach(i=>i())}),this.delayedEvents.clear()}),v(this,"stopActivities",e=>{e?(this.activityEvents.get(e)?.forEach(i=>i()),this.activityEvents.get(e)?.clear(),this.activityEvents.delete(e)):(this.activityEvents.forEach(i=>{i.forEach(r=>r()),i.clear()}),this.activityEvents.clear())}),v(this,"sendChild",(e,i)=>{let r=U(e),o=Tn(i,this.contextSnapshot),s=this.children.get(o);s||le(`[@zag-js/core] Cannot send '${r.type}' event to unknown child`),s.send(r)}),v(this,"stopChild",e=>{this.children.has(e)||le(`[@zag-js/core > stop-child] Cannot stop unknown child ${e}`),this.children.get(e).stop(),this.children.delete(e)}),v(this,"removeChild",e=>{this.children.delete(e)}),v(this,"stopChildren",()=>{this.children.forEach(e=>e.stop()),this.children.clear()}),v(this,"setParent",e=>{this.parent=e}),v(this,"spawn",(e,i)=>{let r=Tn(e);return i&&(r.id=i),r.type="machine.actor",r.setParent(this),this.children.set(r.id,it(r)),r.onDone(()=>{this.removeChild(r.id)}).start(),it(ut(r))}),v(this,"stopActivity",e=>{if(!this.state.value)return;let i=this.activityEvents.get(this.state.value);i?.get(e)?.(),i?.delete(e)}),v(this,"addActivityCleanup",(e,i,r)=>{e&&(this.activityEvents.has(e)?this.activityEvents.get(e)?.set(i,r):this.activityEvents.set(e,new Map([[i,r]])))}),v(this,"setState",e=>{this.state.previousValue=this.state.value,this.state.value=e;let i=this.getStateNode(e);e==null?wr(this.state.tags):this.state.tags=ft(i?.tags)}),v(this,"setContext",e=>{e&&Rn(this.state.context,de(e))}),v(this,"setOptions",e=>{let i=de(e);this.actionMap={...this.actionMap,...i.actions},this.delayMap={...this.delayMap,...i.delays},this.activityMap={...this.activityMap,...i.activities},this.guardMap={...this.guardMap,...i.guards}}),v(this,"getStateNode",e=>{if(e)return this.config.states?.[e]}),v(this,"getNextStateInfo",(e,i)=>{let r=this.determineTransition(e,i),o=!r?.target,s=r?.target??this.state.value,a=this.state.value!==s,u=this.getStateNode(s),d={reenter:!o&&!a&&!r?.internal,transition:r,stateNode:u,target:s,changed:a};return this.log("NextState:",`[${i.type}]`,this.state.value,"---->",d.target),d}),v(this,"getAfterActions",(e,i)=>{let r;return{entry:()=>{r=globalThis.setTimeout(()=>{let o=this.getNextStateInfo(e,this.state.event);this.performStateChangeEffects(this.state.value,o,this.state.event)},i)},exit:()=>{globalThis.clearTimeout(r)}}}),v(this,"getDelayedEventActions",e=>{let i=this.getStateNode(e),r=this.state.event;if(!i||!i.after)return;let o=[],s=[];if(ue(i.after)){let a=this.determineTransition(i.after,r);if(!a)return;if(!Sr(a,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(a)}`);let l=Vt(a.delay,this.delayMap)(this.contextSnapshot,r),d=this.getAfterActions(a,l);return o.push(d.entry),s.push(d.exit),{entries:o,exits:s}}if(Ft(i.after))for(let a in i.after){let u=i.after[a],d=Vt(a,this.delayMap)(this.contextSnapshot,r),h=this.getAfterActions(u,d);o.push(h.entry),s.push(h.exit)}return{entries:o,exits:s}}),v(this,"executeActions",(e,i)=>{let r=_e(e,this.guardMap)(this.contextSnapshot,i,this.guardMeta);for(let o of ft(r)){let s=H(o)?this.actionMap?.[o]:o;De(H(o)&&!s,`[@zag-js/core > execute-actions] No implementation found for action: \`${o}\``),s?.(this.state.context,i,this.meta)}}),v(this,"executeActivities",(e,i,r)=>{for(let o of i){let s=H(o)?this.activityMap?.[o]:o;if(!s){De(`[@zag-js/core > execute-activity] No implementation found for activity: \`${o}\``);continue}let a=s(this.state.context,e,this.meta);if(a){let u=H(o)?o:o.name||Pn();this.addActivityCleanup(r??this.state.value,u,a)}}}),v(this,"createEveryActivities",(e,i)=>{if(e)if(ue(e)){let r=ft(e).find(u=>{let l=u.delay,h=Vt(l,this.delayMap)(this.contextSnapshot,this.state.event);return Cn(u.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??h!=null});if(!r)return;let s=Vt(r.delay,this.delayMap)(this.contextSnapshot,this.state.event);i(()=>{let u=globalThis.setInterval(()=>{this.executeActions(r.actions,this.state.event)},s);return()=>{globalThis.clearInterval(u)}})}else for(let r in e){let o=e?.[r],a=Vt(r,this.delayMap)(this.contextSnapshot,this.state.event);i(()=>{let l=globalThis.setInterval(()=>{this.executeActions(o,this.state.event)},a);return()=>{globalThis.clearInterval(l)}})}}),v(this,"setEvent",e=>{this.state.previousEvent=this.state.event,this.state.event=ut(U(e))}),v(this,"performExitEffects",(e,i)=>{let r=this.state.value;if(r==="")return;let o=e?this.getStateNode(e):void 0;this.stopActivities(r);let s=_e(o?.exit,this.guardMap)(this.contextSnapshot,i,this.guardMeta),a=ft(s),u=this.delayedEvents.get(r);u&&a.push(...u),this.executeActions(a,i)}),v(this,"performEntryEffects",(e,i)=>{let r=this.getStateNode(e),o=ft(r?.activities);this.createEveryActivities(r?.every,l=>{o.unshift(l)}),o.length>0&&this.executeActivities(i,o);let s=_e(r?.entry,this.guardMap)(this.contextSnapshot,i,this.guardMeta),a=ft(s),u=this.getDelayedEventActions(e);r?.after&&u&&(this.delayedEvents.set(e,u?.exits),a.push(...u.entries)),this.executeActions(a,i),r?.type==="final"&&(this.state.done=!0,this.doneListeners.forEach(l=>{l(this.stateSnapshot)}),this.stop())}),v(this,"performTransitionEffects",(e,i)=>{let r=this.determineTransition(e,i);this.executeActions(r?.actions,i)}),v(this,"performStateChangeEffects",(e,i,r)=>{this.setEvent(r);let o=i.changed||i.reenter;o&&this.performExitEffects(e,r),this.performTransitionEffects(i.transition,r),this.setState(i.target),o&&this.performEntryEffects(i.target,r)}),v(this,"determineTransition",(e,i)=>Dr(e,this.guardMap)?.(this.contextSnapshot,i,this.guardMeta)),v(this,"sendParent",e=>{this.parent||le("[@zag-js/core > send-parent] Cannot send event to an unknown parent");let i=U(e);this.parent?.send(i)}),v(this,"log",(...e)=>{Tr()&&this.options.debug&&console.log(...e)}),v(this,"send",e=>{let i=U(e);this.transition(this.state.value,i)}),v(this,"transition",(e,i)=>{let r=H(e)?this.getStateNode(e):e?.stateNode,o=U(i);if(!r&&!this.config.on){let u=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${e}, \`event\`: ${o.type}`;De(u);return}let s=r?.on?.[o.type]??this.config.on?.[o.type],a=this.getNextStateInfo(s,o);return this.performStateChangeEffects(this.state.value,a,o),a.stateNode}),v(this,"subscribe",e=>(this.stateListeners.add(e),this.status==="Running"&&e(this.stateSnapshot),()=>{this.stateListeners.delete(e)})),v(this,"onDone",e=>(this.doneListeners.add(e),this)),v(this,"onTransition",e=>(this.stateListeners.add(e),this.status==="Running"&&e(this.stateSnapshot),this)),this.config=Sn(t),this.options=Sn(n??{}),this.id=this.config.id??`machine-${Pn()}`,this.guardMap=this.options?.guards??{},this.actionMap=this.options?.actions??{},this.delayMap=this.options?.delays??{},this.activityMap=this.options?.activities??{},this.sync=this.options?.sync??!1,this.state=Nr(this.config),this.initialContext=lt(this.state.context)}get stateSnapshot(){return it(lt(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){let t=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return t.stateSnapshot},get initialContext(){return t.initialContext},get initialState(){return t.initialState?.target??""}}}get meta(){return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:this.initialState?.target??"",getState:()=>this.stateSnapshot,getAction:t=>this.actionMap[t],getGuard:t=>this.guardMap[t]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}},ge=(t,n)=>new _r(t,n);var Vr=(...t)=>t.map(n=>n?.trim?.()).filter(Boolean).join(" "),Fr=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,An=t=>{let n={},e;for(;e=Fr.exec(t);)n[e[1]]=e[2];return n},Br=(t,n)=>{if(H(t)){if(H(n))return`${t};${n}`;t=An(t)}else H(n)&&(n=An(n));return Object.assign({},t??{},n??{})},Hr=/^on[A-Z]/;function Mn(...t){let n={};for(let e of t){for(let i in n){if(Hr.test(i)&&typeof n[i]=="function"&&typeof e[i]=="function"){n[i]=Or(e[i],n[i]);continue}if(i==="className"||i==="class"){n[i]=Vr(n[i],e[i]);continue}if(i==="style"){n[i]=Br(n[i],e[i]);continue}n[i]=e[i]!==void 0?e[i]:n[i]}for(let i in e)n[i]===void 0&&(n[i]=e[i])}return n}function Ln(t){return new Proxy({},{get(){return t}})}var rt=()=>t=>Array.from(new Set(t));var Wr=ht("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator"),Bt=Wr.build(),R=te({getRootId:t=>t.ids?.root??`accordion:${t.id}`,getItemId:(t,n)=>t.ids?.item?.(n)??`accordion:${t.id}:item:${n}`,getItemContentId:(t,n)=>t.ids?.content?.(n)??`accordion:${t.id}:content:${n}`,getItemTriggerId:(t,n)=>t.ids?.trigger?.(n)??`accordion:${t.id}:trigger:${n}`,getRootEl:t=>R.getById(t,R.getRootId(t)),getTriggers:t=>{let e=`[aria-controls][data-ownedby='${CSS.escape(R.getRootId(t))}']:not([disabled])`;return Qt(R.getRootEl(t),e)},getFirstTriggerEl:t=>re(R.getTriggers(t)),getLastTriggerEl:t=>oe(R.getTriggers(t)),getNextTriggerEl:(t,n)=>jt(R.getTriggers(t),R.getItemTriggerId(t,n)),getPrevTriggerEl:(t,n)=>zt(R.getTriggers(t),R.getItemTriggerId(t,n))});function Fe(t,n,e){let i=t.context.focusedValue,r=t.context.value,o=t.context.multiple;function s(u){let l=u;o&&l.length>1&&(l=[l[0]]),n({type:"VALUE.SET",value:l})}function a(u){return{expanded:r.includes(u.value),focused:i===u.value,disabled:!!(u.disabled??t.context.disabled)}}return{focusedValue:i,value:r,setValue:s,getItemState:a,rootProps:e.element({...Bt.root.attrs,dir:t.context.dir,id:R.getRootId(t.context),"data-orientation":t.context.orientation}),getItemProps(u){let l=a(u);return e.element({...Bt.item.attrs,dir:t.context.dir,id:R.getItemId(t.context,u.value),"data-state":l.expanded?"open":"closed","data-focus":V(l.focused),"data-disabled":V(l.disabled),"data-orientation":t.context.orientation})},getItemContentProps(u){let l=a(u);return e.element({...Bt.itemContent.attrs,dir:t.context.dir,role:"region",id:R.getItemContentId(t.context,u.value),"aria-labelledby":R.getItemTriggerId(t.context,u.value),hidden:!l.expanded,"data-state":l.expanded?"open":"closed","data-disabled":V(l.disabled),"data-focus":V(l.focused),"data-orientation":t.context.orientation})},getItemIndicatorProps(u){let l=a(u);return e.element({...Bt.itemIndicator.attrs,dir:t.context.dir,"aria-hidden":!0,"data-state":l.expanded?"open":"closed","data-disabled":V(l.disabled),"data-focus":V(l.focused),"data-orientation":t.context.orientation})},getItemTriggerProps(u){let{value:l}=u,d=a(u);return e.button({...Bt.itemTrigger.attrs,type:"button",dir:t.context.dir,id:R.getItemTriggerId(t.context,l),"aria-controls":R.getItemContentId(t.context,l),"aria-expanded":d.expanded,disabled:d.disabled,"data-orientation":t.context.orientation,"aria-disabled":d.disabled,"data-state":d.expanded?"open":"closed","data-ownedby":R.getRootId(t.context),onFocus(){d.disabled||n({type:"TRIGGER.FOCUS",value:l})},onBlur(){d.disabled||n("TRIGGER.BLUR")},onClick(h){d.disabled||(ze()&&h.currentTarget.focus(),n({type:"TRIGGER.CLICK",value:l}))},onKeyDown(h){if(h.defaultPrevented||d.disabled)return;let c={ArrowDown(){t.context.isHorizontal||n({type:"GOTO.NEXT",value:l})},ArrowUp(){t.context.isHorizontal||n({type:"GOTO.PREV",value:l})},ArrowRight(){t.context.isHorizontal&&n({type:"GOTO.NEXT",value:l})},ArrowLeft(){t.context.isHorizontal&&n({type:"GOTO.PREV",value:l})},Home(){n({type:"GOTO.FIRST",value:l})},End(){n({type:"GOTO.LAST",value:l})}},f=kt(h,{dir:t.context.dir,orientation:t.context.orientation}),g=c[f];g&&(g(h),h.preventDefault())}})}}}var{and:Yr,not:Gr}=he;function kn(t){let n=yt(t);return ge({id:"accordion",initial:"idle",context:{focusedValue:null,value:[],collapsible:!1,multiple:!1,orientation:"vertical",...n},watch:{value:"coarseValue",multiple:"coarseValue"},created:"coarseValue",computed:{isHorizontal:e=>e.orientation==="horizontal"},on:{"VALUE.SET":{actions:["setValue"]}},states:{idle:{on:{"TRIGGER.FOCUS":{target:"focused",actions:"setFocusedValue"}}},focused:{on:{"GOTO.NEXT":{actions:"focusNextTrigger"},"GOTO.PREV":{actions:"focusPrevTrigger"},"TRIGGER.CLICK":[{guard:Yr("isExpanded","canToggle"),actions:["collapse"]},{guard:Gr("isExpanded"),actions:["expand"]}],"GOTO.FIRST":{actions:"focusFirstTrigger"},"GOTO.LAST":{actions:"focusLastTrigger"},"TRIGGER.BLUR":{target:"idle",actions:"clearFocusedValue"}}}}},{guards:{canToggle:e=>!!e.collapsible||!!e.multiple,isExpanded:(e,i)=>e.value.includes(i.value)},actions:{collapse(e,i){let r=e.multiple?hn(e.value,i.value):[];Ht.value(e,e.multiple?r:[])},expand(e,i){let r=e.multiple?dn(e.value,i.value):[i.value];Ht.value(e,r)},focusFirstTrigger(e){R.getFirstTriggerEl(e)?.focus()},focusLastTrigger(e){R.getLastTriggerEl(e)?.focus()},focusNextTrigger(e){if(!e.focusedValue)return;R.getNextTriggerEl(e,e.focusedValue)?.focus()},focusPrevTrigger(e){if(!e.focusedValue)return;R.getPrevTriggerEl(e,e.focusedValue)?.focus()},setFocusedValue(e,i){Ht.focusedValue(e,i.value)},clearFocusedValue(e){Ht.focusedValue(e,null)},setValue(e,i){Ht.value(e,i.value)},coarseValue(e){!e.multiple&&e.value.length>1&&(se("The value of accordion should be a single value when multiple is false."),e.value=[e.value[0]])}}})}var Nn={change(t){t.onValueChange?.({value:Array.from(t.value)})},focusChange(t){t.onFocusChange?.({value:t.focusedValue})}},Ht={value(t,n){It(t.value,n)||(t.value=n,Nn.change(t))},focusedValue(t,n){It(t.focusedValue,n)||(t.focusedValue=n,Nn.focusChange(t))}},$r=rt()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]),Ts=nt($r),Kr=rt()(["value","disabled"]),Ps=nt(Kr);var Dn={onFocus:"onFocusin",onBlur:"onFocusout",onChange:"onInput",onDoubleClick:"onDblclick",htmlFor:"for",className:"class",defaultValue:"value",defaultChecked:"checked"},Ur=t=>{let n="";for(let e in t){let i=t[e];i!=null&&(e.startsWith("--")||(e=e.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`)),n+=`${e}:${i};`)}return n},Ct=Ln(t=>Object.entries(t).reduce((n,[e,i])=>i===void 0?n:(e in Dn&&(e=Dn[e]),e==="style"&&typeof i=="object"?(n.style=Ur(i),n):(n[e.toLowerCase()]=i,n)),{}));var _n=new WeakMap;function W(t,n){let e=_n.get(t)||{},i=Object.keys(n),r=(c,f)=>{t.addEventListener(c.toLowerCase(),f)},o=(c,f)=>{t.removeEventListener(c.toLowerCase(),f)},s=c=>c.startsWith("on"),a=c=>!c.startsWith("on"),u=c=>r(c.substring(2),n[c]),l=c=>o(c.substring(2),n[c]),d=c=>{let f=n[c],g=e[c];if(f!==g){if(typeof f=="boolean"&&(f=f||void 0),f!=null){["value","checked","htmlFor"].includes(c)?t[c]=f:t.setAttribute(c.toLowerCase(),f);return}t.removeAttribute(c.toLowerCase())}};for(let c in e)n[c]==null&&t.removeAttribute(c.toLowerCase());return Object.keys(e).filter(s).forEach(c=>{o(c.substring(2),e[c])}),i.filter(s).forEach(u),i.filter(a).forEach(d),_n.set(t,n),function(){i.filter(s).forEach(l)}}var Vn={mounted(){this.context={id:this.el.id},this.service=kn(this.context),this.api=Fe(this.service.state,this.service.send,Ct),this.init()},beforeDestroy(){this.service.stop()},init(){let t=this.service;this.render(),t.subscribe(()=>{this.api=Fe(t.state,t.send,Ct),this.render()}),t.start()},items(){return Array.from(this.el.querySelectorAll("[data-element='item']"))},render(){W(this.el,this.api.rootProps),this.items().forEach(t=>{this.renderItem(t)})},renderItem(t){let n=t.dataset.index;if(!n)throw new Error("Expected index to be defined");let e=t.querySelector("[data-element='trigger']"),i=t.querySelector("[data-element='content']");if(!e)throw new Error("Expected trigger to be defined");if(!i)throw new Error("Expected content to be defined");W(t,this.api.getItemProps({value:n})),W(e,this.api.getItemTriggerProps({value:n})),W(i,this.api.getItemContentProps({value:n}))}};var $=Math.min,D=Math.max,Yt=Math.round,Gt=Math.floor,ot=t=>({x:t,y:t}),jr={left:"right",right:"left",bottom:"top",top:"bottom"},zr={start:"end",end:"start"};function me(t,n,e){return D(t,$(n,e))}function st(t,n){return typeof t=="function"?t(n):t}function Q(t){return t.split("-")[0]}function xt(t){return t.split("-")[1]}function ye(t){return t==="x"?"y":"x"}function ve(t){return t==="y"?"height":"width"}function wt(t){return["top","bottom"].includes(Q(t))?"y":"x"}function Ee(t){return ye(wt(t))}function Fn(t,n,e){e===void 0&&(e=!1);let i=xt(t),r=Ee(t),o=ve(r),s=r==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return n.reference[o]>n.floating[o]&&(s=Wt(s)),[s,Wt(s)]}function Bn(t){let n=Wt(t);return[pe(t),n,pe(n)]}function pe(t){return t.replace(/start|end/g,n=>zr[n])}function qr(t,n,e){let i=["left","right"],r=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return e?n?r:i:n?i:r;case"left":case"right":return n?o:s;default:return[]}}function Hn(t,n,e,i){let r=xt(t),o=qr(Q(t),e==="start",i);return r&&(o=o.map(s=>s+"-"+r),n&&(o=o.concat(o.map(pe)))),o}function Wt(t){return t.replace(/left|right|bottom|top/g,n=>jr[n])}function Jr(t){return{top:0,right:0,bottom:0,left:0,...t}}function Be(t){return typeof t!="number"?Jr(t):{top:t,right:t,bottom:t,left:t}}function bt(t){let{x:n,y:e,width:i,height:r}=t;return{width:i,height:r,top:e,left:n,right:n+i,bottom:e+r,x:n,y:e}}function Wn(t,n,e){let{reference:i,floating:r}=t,o=wt(n),s=Ee(n),a=ve(s),u=Q(n),l=o==="y",d=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,c=i[a]/2-r[a]/2,f;switch(u){case"top":f={x:d,y:i.y-r.height};break;case"bottom":f={x:d,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:h};break;case"left":f={x:i.x-r.width,y:h};break;default:f={x:i.x,y:i.y}}switch(xt(n)){case"start":f[s]-=c*(e&&l?-1:1);break;case"end":f[s]+=c*(e&&l?-1:1);break}return f}var Yn=async(t,n,e)=>{let{placement:i="bottom",strategy:r="absolute",middleware:o=[],platform:s}=e,a=o.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(n)),l=await s.getElementRects({reference:t,floating:n,strategy:r}),{x:d,y:h}=Wn(l,i,u),c=i,f={},g=0;for(let y=0;y<a.length;y++){let{name:m,fn:p}=a[y],{x:E,y:w,data:O,reset:S}=await p({x:d,y:h,initialPlacement:i,placement:c,strategy:r,middlewareData:f,rects:l,platform:s,elements:{reference:t,floating:n}});d=E??d,h=w??h,f={...f,[m]:{...f[m],...O}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(c=S.placement),S.rects&&(l=S.rects===!0?await s.getElementRects({reference:t,floating:n,strategy:r}):S.rects),{x:d,y:h}=Wn(l,c,u)),y=-1)}return{x:d,y:h,placement:c,strategy:r,middlewareData:f}};async function xe(t,n){var e;n===void 0&&(n={});let{x:i,y:r,platform:o,rects:s,elements:a,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:c=!1,padding:f=0}=st(n,t),g=Be(f),m=a[c?h==="floating"?"reference":"floating":h],p=bt(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(m)))==null||e?m:m.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:d,strategy:u})),E=h==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),O=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},S=bt(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:w,strategy:u}):E);return{top:(p.top-S.top+g.top)/O.y,bottom:(S.bottom-p.bottom+g.bottom)/O.y,left:(p.left-S.left+g.left)/O.x,right:(S.right-p.right+g.right)/O.x}}var Gn=t=>({name:"arrow",options:t,async fn(n){let{x:e,y:i,placement:r,rects:o,platform:s,elements:a,middlewareData:u}=n,{element:l,padding:d=0}=st(t,n)||{};if(l==null)return{};let h=Be(d),c={x:e,y:i},f=Ee(r),g=ve(f),y=await s.getDimensions(l),m=f==="y",p=m?"top":"left",E=m?"bottom":"right",w=m?"clientHeight":"clientWidth",O=o.reference[g]+o.reference[f]-c[f]-o.floating[g],S=c[f]-o.reference[f],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l)),L=I?I[w]:0;(!L||!await(s.isElement==null?void 0:s.isElement(I)))&&(L=a.floating[w]||o.floating[g]);let Y=O/2-S/2,P=L/2-y[g]/2-1,b=$(h[p],P),T=$(h[E],P),A=b,G=L-y[g]-T,C=L/2-y[g]/2+Y,N=me(A,C,G),M=!u.arrow&&xt(r)!=null&&C!==N&&o.reference[g]/2-(C<A?b:T)-y[g]/2<0,et=M?C<A?C-A:C-G:0;return{[f]:c[f]+et,data:{[f]:N,centerOffset:C-N-et,...M&&{alignmentOffset:et}},reset:M}}});var $n=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var e,i;let{placement:r,middlewareData:o,rects:s,initialPlacement:a,platform:u,elements:l}=n,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:c,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...m}=st(t,n);if((e=o.arrow)!=null&&e.alignmentOffset)return{};let p=Q(r),E=Q(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),O=c||(E||!y?[Wt(a)]:Bn(a));!c&&g!=="none"&&O.push(...Hn(a,y,g,w));let S=[a,...O],I=await xe(n,m),L=[],Y=((i=o.flip)==null?void 0:i.overflows)||[];if(d&&L.push(I[p]),h){let A=Fn(r,s,w);L.push(I[A[0]],I[A[1]])}if(Y=[...Y,{placement:r,overflows:L}],!L.every(A=>A<=0)){var P,b;let A=(((P=o.flip)==null?void 0:P.index)||0)+1,G=S[A];if(G)return{data:{index:A,overflows:Y},reset:{placement:G}};let C=(b=Y.filter(N=>N.overflows[0]<=0).sort((N,M)=>N.overflows[1]-M.overflows[1])[0])==null?void 0:b.placement;if(!C)switch(f){case"bestFit":{var T;let N=(T=Y.map(M=>[M.placement,M.overflows.filter(et=>et>0).reduce((et,Li)=>et+Li,0)]).sort((M,et)=>M[1]-et[1])[0])==null?void 0:T[0];N&&(C=N);break}case"initialPlacement":C=a;break}if(r!==C)return{reset:{placement:C}}}return{}}}};async function Zr(t,n){let{placement:e,platform:i,elements:r}=t,o=await(i.isRTL==null?void 0:i.isRTL(r.floating)),s=Q(e),a=xt(e),u=wt(e)==="y",l=["left","top"].includes(s)?-1:1,d=o&&u?-1:1,h=st(n,t),{mainAxis:c,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),u?{x:f*d,y:c*l}:{x:c*l,y:f*d}}var Kn=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var e,i;let{x:r,y:o,placement:s,middlewareData:a}=n,u=await Zr(n,t);return s===((e=a.offset)==null?void 0:e.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+u.x,y:o+u.y,data:{...u,placement:s}}}}},Xn=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){let{x:e,y:i,placement:r}=n,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:m=>{let{x:p,y:E}=m;return{x:p,y:E}}},...u}=st(t,n),l={x:e,y:i},d=await xe(n,u),h=wt(Q(r)),c=ye(h),f=l[c],g=l[h];if(o){let m=c==="y"?"top":"left",p=c==="y"?"bottom":"right",E=f+d[m],w=f-d[p];f=me(E,f,w)}if(s){let m=h==="y"?"top":"left",p=h==="y"?"bottom":"right",E=g+d[m],w=g-d[p];g=me(E,g,w)}let y=a.fn({...n,[c]:f,[h]:g});return{...y,data:{x:y.x-e,y:y.y-i}}}}},Un=function(t){return t===void 0&&(t={}),{options:t,fn(n){let{x:e,y:i,placement:r,rects:o,middlewareData:s}=n,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=st(t,n),d={x:e,y:i},h=wt(r),c=ye(h),f=d[c],g=d[h],y=st(a,n),m=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(u){let w=c==="y"?"height":"width",O=o.reference[c]-o.floating[w]+m.mainAxis,S=o.reference[c]+o.reference[w]-m.mainAxis;f<O?f=O:f>S&&(f=S)}if(l){var p,E;let w=c==="y"?"width":"height",O=["top","left"].includes(Q(r)),S=o.reference[h]-o.floating[w]+(O&&((p=s.offset)==null?void 0:p[h])||0)+(O?0:m.crossAxis),I=o.reference[h]+o.reference[w]+(O?0:((E=s.offset)==null?void 0:E[h])||0)-(O?m.crossAxis:0);g<S?g=S:g>I&&(g=I)}return{[c]:f,[h]:g}}}},jn=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){let{placement:e,rects:i,platform:r,elements:o}=n,{apply:s=()=>{},...a}=st(t,n),u=await xe(n,a),l=Q(e),d=xt(e),h=wt(e)==="y",{width:c,height:f}=i.floating,g,y;l==="top"||l==="bottom"?(g=l,y=d===(await(r.isRTL==null?void 0:r.isRTL(o.floating))?"start":"end")?"left":"right"):(y=l,g=d==="end"?"top":"bottom");let m=f-u.top-u.bottom,p=c-u.left-u.right,E=$(f-u[g],m),w=$(c-u[y],p),O=!n.middlewareData.shift,S=E,I=w;if(h?I=d||O?$(w,p):p:S=d||O?$(E,m):m,O&&!d){let Y=D(u.left,0),P=D(u.right,0),b=D(u.top,0),T=D(u.bottom,0);h?I=c-2*(Y!==0||P!==0?Y+P:D(u.left,u.right)):S=f-2*(b!==0||T!==0?b+T:D(u.top,u.bottom))}await s({...n,availableWidth:I,availableHeight:S});let L=await r.getDimensions(o.floating);return c!==L.width||f!==L.height?{reset:{rects:!0}}:{}}}};function Ot(t){return qn(t)?(t.nodeName||"").toLowerCase():"#document"}function F(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function tt(t){var n;return(n=(qn(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function qn(t){return t instanceof Node||t instanceof F(t).Node}function j(t){return t instanceof Element||t instanceof F(t).Element}function z(t){return t instanceof HTMLElement||t instanceof F(t).HTMLElement}function zn(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof F(t).ShadowRoot}function Lt(t){let{overflow:n,overflowX:e,overflowY:i,display:r}=K(t);return/auto|scroll|overlay|hidden|clip/.test(n+i+e)&&!["inline","contents"].includes(r)}function Jn(t){return["table","td","th"].includes(Ot(t))}function we(t){let n=be(),e=K(t);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!n&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!n&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(e.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(e.contain||"").includes(i))}function Zn(t){let n=ct(t);for(;z(n)&&!Tt(n);){if(we(n))return n;n=ct(n)}return null}function be(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tt(t){return["html","body","#document"].includes(Ot(t))}function K(t){return F(t).getComputedStyle(t)}function $t(t){return j(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ct(t){if(Ot(t)==="html")return t;let n=t.assignedSlot||t.parentNode||zn(t)&&t.host||tt(t);return zn(n)?n.host:n}function Qn(t){let n=ct(t);return Tt(n)?t.ownerDocument?t.ownerDocument.body:t.body:z(n)&&Lt(n)?n:Qn(n)}function Mt(t,n,e){var i;n===void 0&&(n=[]),e===void 0&&(e=!0);let r=Qn(t),o=r===((i=t.ownerDocument)==null?void 0:i.body),s=F(r);return o?n.concat(s,s.visualViewport||[],Lt(r)?r:[],s.frameElement&&e?Mt(s.frameElement):[]):n.concat(r,Mt(r,[],e))}function ni(t){let n=K(t),e=parseFloat(n.width)||0,i=parseFloat(n.height)||0,r=z(t),o=r?t.offsetWidth:e,s=r?t.offsetHeight:i,a=Yt(e)!==o||Yt(i)!==s;return a&&(e=o,i=s),{width:e,height:i,$:a}}function We(t){return j(t)?t:t.contextElement}function Nt(t){let n=We(t);if(!z(n))return ot(1);let e=n.getBoundingClientRect(),{width:i,height:r,$:o}=ni(n),s=(o?Yt(e.width):e.width)/i,a=(o?Yt(e.height):e.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}var Qr=ot(0);function ii(t){let n=F(t);return!be()||!n.visualViewport?Qr:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function to(t,n,e){return n===void 0&&(n=!1),!e||n&&e!==F(t)?!1:n}function Pt(t,n,e,i){n===void 0&&(n=!1),e===void 0&&(e=!1);let r=t.getBoundingClientRect(),o=We(t),s=ot(1);n&&(i?j(i)&&(s=Nt(i)):s=Nt(t));let a=to(o,e,i)?ii(o):ot(0),u=(r.left+a.x)/s.x,l=(r.top+a.y)/s.y,d=r.width/s.x,h=r.height/s.y;if(o){let c=F(o),f=i&&j(i)?F(i):i,g=c,y=g.frameElement;for(;y&&i&&f!==g;){let m=Nt(y),p=y.getBoundingClientRect(),E=K(y),w=p.left+(y.clientLeft+parseFloat(E.paddingLeft))*m.x,O=p.top+(y.clientTop+parseFloat(E.paddingTop))*m.y;u*=m.x,l*=m.y,d*=m.x,h*=m.y,u+=w,l+=O,g=F(y),y=g.frameElement}}return bt({width:d,height:h,x:u,y:l})}var eo=[":popover-open",":modal"];function Ye(t){return eo.some(n=>{try{return t.matches(n)}catch{return!1}})}function no(t){let{elements:n,rect:e,offsetParent:i,strategy:r}=t,o=r==="fixed",s=tt(i),a=n?Ye(n.floating):!1;if(i===s||a&&o)return e;let u={scrollLeft:0,scrollTop:0},l=ot(1),d=ot(0),h=z(i);if((h||!h&&!o)&&((Ot(i)!=="body"||Lt(s))&&(u=$t(i)),z(i))){let c=Pt(i);l=Nt(i),d.x=c.x+i.clientLeft,d.y=c.y+i.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-u.scrollLeft*l.x+d.x,y:e.y*l.y-u.scrollTop*l.y+d.y}}function io(t){return Array.from(t.getClientRects())}function ri(t){return Pt(tt(t)).left+$t(t).scrollLeft}function ro(t){let n=tt(t),e=$t(t),i=t.ownerDocument.body,r=D(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth),o=D(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight),s=-e.scrollLeft+ri(t),a=-e.scrollTop;return K(i).direction==="rtl"&&(s+=D(n.clientWidth,i.clientWidth)-r),{width:r,height:o,x:s,y:a}}function oo(t,n){let e=F(t),i=tt(t),r=e.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,u=0;if(r){o=r.width,s=r.height;let l=be();(!l||l&&n==="fixed")&&(a=r.offsetLeft,u=r.offsetTop)}return{width:o,height:s,x:a,y:u}}function so(t,n){let e=Pt(t,!0,n==="fixed"),i=e.top+t.clientTop,r=e.left+t.clientLeft,o=z(t)?Nt(t):ot(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,u=r*o.x,l=i*o.y;return{width:s,height:a,x:u,y:l}}function ti(t,n,e){let i;if(n==="viewport")i=oo(t,e);else if(n==="document")i=ro(tt(t));else if(j(n))i=so(n,e);else{let r=ii(t);i={...n,x:n.x-r.x,y:n.y-r.y}}return bt(i)}function oi(t,n){let e=ct(t);return e===n||!j(e)||Tt(e)?!1:K(e).position==="fixed"||oi(e,n)}function co(t,n){let e=n.get(t);if(e)return e;let i=Mt(t,[],!1).filter(a=>j(a)&&Ot(a)!=="body"),r=null,o=K(t).position==="fixed",s=o?ct(t):t;for(;j(s)&&!Tt(s);){let a=K(s),u=we(s);!u&&a.position==="fixed"&&(r=null),(o?!u&&!r:!u&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Lt(s)&&!u&&oi(t,s))?i=i.filter(d=>d!==s):r=a,s=ct(s)}return n.set(t,i),i}function ao(t){let{element:n,boundary:e,rootBoundary:i,strategy:r}=t,s=[...e==="clippingAncestors"?Ye(n)?[]:co(n,this._c):[].concat(e),i],a=s[0],u=s.reduce((l,d)=>{let h=ti(n,d,r);return l.top=D(h.top,l.top),l.right=$(h.right,l.right),l.bottom=$(h.bottom,l.bottom),l.left=D(h.left,l.left),l},ti(n,a,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function lo(t){let{width:n,height:e}=ni(t);return{width:n,height:e}}function uo(t,n,e){let i=z(n),r=tt(n),o=e==="fixed",s=Pt(t,!0,o,n),a={scrollLeft:0,scrollTop:0},u=ot(0);if(i||!i&&!o)if((Ot(n)!=="body"||Lt(r))&&(a=$t(n)),i){let h=Pt(n,!0,o,n);u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}else r&&(u.x=ri(r));let l=s.left+a.scrollLeft-u.x,d=s.top+a.scrollTop-u.y;return{x:l,y:d,width:s.width,height:s.height}}function He(t){return K(t).position==="static"}function ei(t,n){return!z(t)||K(t).position==="fixed"?null:n?n(t):t.offsetParent}function si(t,n){let e=F(t);if(Ye(t))return e;if(!z(t)){let r=ct(t);for(;r&&!Tt(r);){if(j(r)&&!He(r))return r;r=ct(r)}return e}let i=ei(t,n);for(;i&&Jn(i)&&He(i);)i=ei(i,n);return i&&Tt(i)&&He(i)&&!we(i)?e:i||Zn(t)||e}var fo=async function(t){let n=this.getOffsetParent||si,e=this.getDimensions,i=await e(t.floating);return{reference:uo(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function ho(t){return K(t).direction==="rtl"}var go={convertOffsetParentRelativeRectToViewportRelativeRect:no,getDocumentElement:tt,getClippingRect:ao,getOffsetParent:si,getElementRects:fo,getClientRects:io,getDimensions:lo,getScale:Nt,isElement:j,isRTL:ho};function po(t,n){let e=null,i,r=tt(t);function o(){var a;clearTimeout(i),(a=e)==null||a.disconnect(),e=null}function s(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),o();let{left:l,top:d,width:h,height:c}=t.getBoundingClientRect();if(a||n(),!h||!c)return;let f=Gt(d),g=Gt(r.clientWidth-(l+h)),y=Gt(r.clientHeight-(d+c)),m=Gt(l),E={rootMargin:-f+"px "+-g+"px "+-y+"px "+-m+"px",threshold:D(0,$(1,u))||1},w=!0;function O(S){let I=S[0].intersectionRatio;if(I!==u){if(!w)return s();I?s(!1,I):i=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{e=new IntersectionObserver(O,{...E,root:r.ownerDocument})}catch{e=new IntersectionObserver(O,E)}e.observe(t)}return s(!0),o}function ci(t,n,e,i){i===void 0&&(i={});let{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=i,l=We(t),d=r||o?[...l?Mt(l):[],...Mt(n)]:[];d.forEach(p=>{r&&p.addEventListener("scroll",e,{passive:!0}),o&&p.addEventListener("resize",e)});let h=l&&a?po(l,e):null,c=-1,f=null;s&&(f=new ResizeObserver(p=>{let[E]=p;E&&E.target===l&&f&&(f.unobserve(n),cancelAnimationFrame(c),c=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(n)})),e()}),l&&!u&&f.observe(l),f.observe(n));let g,y=u?Pt(t):null;u&&m();function m(){let p=Pt(t);y&&(p.x!==y.x||p.y!==y.y||p.width!==y.width||p.height!==y.height)&&e(),y=p,g=requestAnimationFrame(m)}return e(),()=>{var p;d.forEach(E=>{r&&E.removeEventListener("scroll",e),o&&E.removeEventListener("resize",e)}),h?.(),(p=f)==null||p.disconnect(),f=null,u&&cancelAnimationFrame(g)}}var ai=Kn;var li=Xn,ui=$n,fi=jn;var di=Gn;var hi=Un,gi=(t,n,e)=>{let i=new Map,r={platform:go,...e},o={...r.platform,_c:i};return Yn(t,n,{...r,platform:o})};function pi(t=0,n=0,e=0,i=0){if(typeof DOMRect=="function")return new DOMRect(t,n,e,i);let r={x:t,y:n,width:e,height:i,top:n,right:t+e,bottom:n+i,left:t};return{...r,toJSON:()=>r}}function mo(t){if(!t)return pi();let{x:n,y:e,width:i,height:r}=t;return pi(n,e,i,r)}function yo(t,n){return{contextElement:k(t)?t:void 0,getBoundingClientRect:()=>{let e=t,i=n?.(e);return i||!e?mo(i):e.getBoundingClientRect()}}}var Kt=t=>({variable:t,reference:`var(${t})`}),at={arrowSize:Kt("--arrow-size"),arrowSizeHalf:Kt("--arrow-size-half"),arrowBg:Kt("--arrow-background"),transformOrigin:Kt("--transform-origin"),arrowOffset:Kt("--arrow-offset")},vo=t=>({top:"bottom center","top-start":t?`${t.x}px bottom`:"left bottom","top-end":t?`${t.x}px bottom`:"right bottom",bottom:"top center","bottom-start":t?`${t.x}px top`:"top left","bottom-end":t?`${t.x}px top`:"top right",left:"right center","left-start":t?`right ${t.y}px`:"right top","left-end":t?`right ${t.y}px`:"right bottom",right:"left center","right-start":t?`left ${t.y}px`:"left top","right-end":t?`left ${t.y}px`:"left bottom"}),Eo={name:"transformOrigin",fn({placement:t,elements:n,middlewareData:e}){let{arrow:i}=e,r=vo(i)[t],{floating:o}=n;return o.style.setProperty(at.transformOrigin.variable,r),{data:{transformOrigin:r}}}},xo={name:"rects",fn({rects:t}){return{data:t}}},wo=t=>{if(t)return{name:"shiftArrow",fn({placement:n,middlewareData:e}){if(!e.arrow)return{};let{x:i,y:r}=e.arrow,o=n.split("-")[0];return Object.assign(t.style,{left:i!=null?`${i}px`:"",top:r!=null?`${r}px`:"",[o]:`calc(100% + ${at.arrowOffset.reference})`}),{}}}};function bo(t){let[n,e]=t.split("-");return{side:n,align:e,hasAlign:e!=null}}function yi(t){return t.split("-")[0]}var Oo={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function mi(t,n){let e=t.devicePixelRatio||1;return Math.round(n*e)/e}function vi(t){return gn(t.boundary)}function To(t,n){if(t)return di({element:t,padding:n.arrowPadding})}function Po(t,n){if(!vn(n.offset??n.gutter))return ai(({placement:e})=>{let i=(t?.clientHeight||0)/2,r=n.offset?.mainAxis??n.gutter,o=typeof r=="number"?r+i:r??i,{hasAlign:s}=bo(e),a=s?void 0:n.shift,u=n.offset?.crossAxis??a;return yt({crossAxis:u,mainAxis:o,alignmentAxis:n.shift})})}function So(t){if(t.flip)return ui({boundary:vi(t),padding:t.overflowPadding,fallbackPlacements:t.flip===!0?void 0:t.flip})}function Ao(t){if(!(!t.slide&&!t.overlap))return li({boundary:vi(t),mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding,limiter:hi()})}function Ro(t){return fi({padding:t.overflowPadding,apply({elements:n,rects:e,availableHeight:i,availableWidth:r}){let o=n.floating,s=Math.round(e.reference.width);r=Math.floor(r),i=Math.floor(i),o.style.setProperty("--reference-width",`${s}px`),o.style.setProperty("--available-width",`${r}px`),o.style.setProperty("--available-height",`${i}px`)}})}function Io(t){return t?t===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:t:{}}function Co(t,n,e={}){let i=yo(t,e.getAnchorRect);if(!n||!i)return;let r=Object.assign({},Oo,e),o=n.querySelector("[data-part=arrow]"),s=[Po(o,r),So(r),Ao(r),To(o,r),wo(o),Eo,Ro(r),xo],{placement:a,strategy:u,onComplete:l,onPositioned:d}=r,h=async()=>{if(!i||!n)return;let y=await gi(i,n,{placement:a,middleware:s,strategy:u});l?.(y),d?.({placed:!0});let m=pt(n),p=mi(m,y.x),E=mi(m,y.y);n.style.setProperty("--x",`${p}px`),n.style.setProperty("--y",`${E}px`);let w=n.firstElementChild;if(w){let O=m.getComputedStyle(w).zIndex;n.style.setProperty("--z-index",O)}},c=async()=>{e.updatePosition?(await e.updatePosition({updatePosition:h}),d?.({placed:!0})):await h()},f=Io(r.listeners),g=r.listeners?ci(i,n,c,f):mn;return c(),()=>{g?.(),d?.({placed:!1})}}function Ge(t,n,e={}){let{defer:i,...r}=e,o=i?B:a=>a(),s=[];return s.push(o(()=>{let a=typeof t=="function"?t():t,u=typeof n=="function"?n():n;s.push(Co(a,u,r))})),()=>{s.forEach(a=>a?.())}}var Mo={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function Ei(t={}){let{placement:n,sameWidth:e,fitViewport:i,strategy:r="absolute"}=t;return{arrow:{position:"absolute",width:at.arrowSize.reference,height:at.arrowSize.reference,[at.arrowSizeHalf.variable]:`calc(${at.arrowSize.reference} / 2)`,[at.arrowOffset.variable]:`calc(${at.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:n?Mo[n.split("-")[0]]:void 0,background:at.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:r,isolation:"isolate",minWidth:e?void 0:"max-content",width:e?"var(--reference-width)":void 0,maxWidth:i?"var(--available-width)":void 0,maxHeight:i?"var(--available-height)":void 0,top:"0px",left:"0px",transform:n?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}function Lo(t){let n={each(e){for(let i=0;i<t.frames?.length;i+=1){let r=t.frames[i];r&&e(r)}},addEventListener(e,i,r){return n.each(o=>{try{o.document.addEventListener(e,i,r)}catch{}}),()=>{try{n.removeEventListener(e,i,r)}catch{}}},removeEventListener(e,i,r){n.each(o=>{try{o.document.removeEventListener(e,i,r)}catch{}})}};return n}var xi="pointerdown.outside",wi="focus.outside";function No(t){for(let n of t)if(k(n)&&Jt(n))return!0;return!1}var bi=t=>"clientY"in t;function ko(t,n){if(!bi(n)||!t)return!1;let e=t.getBoundingClientRect();return e.width===0||e.height===0?!1:e.top<=n.clientY&&n.clientY<=e.top+e.height&&e.left<=n.clientX&&n.clientX<=e.left+e.width}function Do(t){let n=Z(t);if(!n||!bi(t))return!1;let i=n.scrollHeight>n.clientHeight&&t.clientX>n.clientWidth,o=n.scrollWidth>n.clientWidth&&t.clientY>n.clientHeight;return i||o}function _o(t,n){let{exclude:e,onFocusOutside:i,onPointerDownOutside:r,onInteractOutside:o,defer:s}=n;if(!t)return;let a=gt(t),u=pt(t),l=Lo(u);function d(m){let p=Z(m);return!k(p)||J(t,p)||ko(t,m)||Do(m)?!1:!e?.(p)}let h;function c(m){function p(){let E=s?B:O=>O(),w=m.composedPath?.()??[m.target];E(()=>{if(!(!t||!d(m))){if(r||o){let O=Me(r,o);t.addEventListener(xi,O,{once:!0})}Ce(t,xi,{bubbles:!1,cancelable:!0,detail:{originalEvent:m,contextmenu:ne(m),focusable:No(w)}})}})}m.pointerType==="touch"?(l.removeEventListener("click",p),a.removeEventListener("click",p),h=p,a.addEventListener("click",p,{once:!0}),l.addEventListener("click",p,{once:!0})):p()}let f=new Set,g=setTimeout(()=>{f.add(l.addEventListener("pointerdown",c,!0)),f.add(mt(a,"pointerdown",c,!0))},0);function y(m){(s?B:E=>E())(()=>{if(!(!t||!d(m))){if(i||o){let E=Me(i,o);t.addEventListener(wi,E,{once:!0})}Ce(t,wi,{bubbles:!1,cancelable:!0,detail:{originalEvent:m,contextmenu:!1,focusable:Jt(Z(m))}})}})}return f.add(mt(a,"focusin",y,!0)),f.add(l.addEventListener("focusin",y,!0)),()=>{clearTimeout(g),h&&(l.removeEventListener("click",h),a.removeEventListener("click",h)),f.forEach(m=>m())}}function Oi(t,n){let{defer:e}=n,i=e?B:o=>o(),r=[];return r.push(i(()=>{let o=typeof t=="function"?t():t;r.push(_o(o,n))})),()=>{r.forEach(o=>o?.())}}function Vo(t,n){let e=i=>{i.key==="Escape"&&(i.isComposing||n?.(i))};return mt(gt(t),"keydown",e,{capture:!0})}var q={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){let n=this.indexOf(t),e=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return n<e},isTopMost(t){return this.layers[this.count()-1]?.node===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},isInNestedLayer(t,n){return this.getNestedLayers(t).some(e=>J(e.node,n))},isInBranch(t){return Array.from(this.branches).some(n=>J(n,t))},add(t){let n=this.layers.push(t);t.node.style.setProperty("--layer-index",`${n}`)},addBranch(t){this.branches.push(t)},remove(t){let n=this.indexOf(t);n<0||(n<this.count()-1&&this.getNestedLayers(t).forEach(i=>i.dismiss()),this.layers.splice(n,1),t.style.removeProperty("--layer-index"))},removeBranch(t){let n=this.branches.indexOf(t);n>=0&&this.branches.splice(n,1)},indexOf(t){return this.layers.findIndex(n=>n.node===t)},dismiss(t){this.layers[this.indexOf(t)]?.dismiss()},clear(){this.remove(this.layers[0].node)}},Ti;function Pi(){q.layers.forEach(({node:t})=>{t.style.pointerEvents=q.isBelowPointerBlockingLayer(t)?"none":"auto"})}function Fo(t){t.style.pointerEvents=""}function Bo(t,n){let e=gt(t),i=[];if(q.hasPointerBlockingLayer()&&!e.body.hasAttribute("data-inert")&&(Ti=document.body.style.pointerEvents,queueMicrotask(()=>{e.body.style.pointerEvents="none",e.body.setAttribute("data-inert","")})),n){let r=cn(n,o=>{i.push(sn(o,{pointerEvents:"auto"}))});i.push(r)}return()=>{q.hasPointerBlockingLayer()||(queueMicrotask(()=>{e.body.style.pointerEvents=Ti,e.body.removeAttribute("data-inert"),e.body.style.length===0&&e.body.removeAttribute("style")}),i.forEach(r=>r()))}}function Ho(t,n){if(!t){se("[@zag-js/dismissable] node is `null` or `undefined`");return}let{onDismiss:e,pointerBlocking:i,exclude:r,debug:o}=n,s={dismiss:e,node:t,pointerBlocking:i};q.add(s),Pi();function a(c){let f=Z(c.detail.originalEvent);q.isBelowPointerBlockingLayer(t)||q.isInBranch(f)||(n.onPointerDownOutside?.(c),n.onInteractOutside?.(c),!c.defaultPrevented&&(o&&console.log("onPointerDownOutside:",c.detail.originalEvent),e?.()))}function u(c){let f=Z(c.detail.originalEvent);q.isInBranch(f)||(n.onFocusOutside?.(c),n.onInteractOutside?.(c),!c.defaultPrevented&&(o&&console.log("onFocusOutside:",c.detail.originalEvent),e?.()))}function l(c){q.isTopMost(t)&&(n.onEscapeKeyDown?.(c),!c.defaultPrevented&&e&&(c.preventDefault(),e()))}function d(c){if(!t)return!1;let f=typeof r=="function"?r():r,g=Array.isArray(f)?f:[f],y=n.persistentElements?.map(m=>m()).filter(k);return y&&g.push(...y),g.some(m=>J(m,c))||q.isInNestedLayer(t,c)}let h=[i?Bo(t,n.persistentElements):void 0,Vo(t,l),Oi(t,{exclude:d,onFocusOutside:u,onPointerDownOutside:a,defer:n.defer})];return()=>{q.remove(t),Pi(),Fo(t),h.forEach(c=>c?.())}}function Si(t,n){let{defer:e}=n,i=e?B:o=>o(),r=[];return r.push(i(()=>{let o=yn(t)?t():t;r.push(Ho(o,n))})),()=>{r.forEach(o=>o?.())}}var Xt=(t,n)=>({x:t,y:n});function Wo(t){let{x:n,y:e,width:i,height:r}=t,o=n+i/2,s=e+r/2;return{x:n,y:e,width:i,height:r,minX:n,minY:e,maxX:n+i,maxY:e+r,midX:o,midY:s,center:Xt(o,s)}}function Yo(t){let n=Xt(t.minX,t.minY),e=Xt(t.maxX,t.minY),i=Xt(t.maxX,t.maxY),r=Xt(t.minX,t.maxY);return{top:n,right:e,bottom:i,left:r}}var{min:lc,max:uc}=Math;function Ai(t,n){let e=Wo(t),{top:i,right:r,left:o,bottom:s}=Yo(e),[a]=n.split("-");return{top:[o,i,r,s],right:[i,r,s,o],bottom:[i,o,s,r],left:[r,i,o,s]}[a]}function Ri(t,n){let{x:e,y:i}=n,r=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){let a=t[o].x,u=t[o].y,l=t[s].x,d=t[s].y;u>i!=d>i&&e<(l-a)*(i-u)/(d-u)+a&&(r=!r)}return r}var{sign:fc,abs:dc,min:hc}=Math;var Go=ht("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem"),_=Go.build(),x=te({getTriggerId:t=>t.ids?.trigger??`menu:${t.id}:trigger`,getContextTriggerId:t=>t.ids?.contextTrigger??`menu:${t.id}:ctx-trigger`,getContentId:t=>t.ids?.content??`menu:${t.id}:content`,getArrowId:t=>t.ids?.arrow??`menu:${t.id}:arrow`,getPositionerId:t=>t.ids?.positioner??`menu:${t.id}:popper`,getGroupId:(t,n)=>t.ids?.group?.(n)??`menu:${t.id}:group:${n}`,getGroupLabelId:(t,n)=>t.ids?.label?.(n)??`menu:${t.id}:label:${n}`,getContentEl:t=>x.getById(t,x.getContentId(t)),getPositionerEl:t=>x.getById(t,x.getPositionerId(t)),getTriggerEl:t=>x.getById(t,x.getTriggerId(t)),getHighlightedItemEl:t=>t.highlightedValue?x.getById(t,t.highlightedValue):null,getArrowEl:t=>x.getById(t,x.getArrowId(t)),getElements:t=>{let e=`[role^="menuitem"][data-ownedby=${CSS.escape(x.getContentId(t))}]:not([data-disabled])`;return Qt(x.getContentEl(t),e)},getFirstEl:t=>re(x.getElements(t)),getLastEl:t=>oe(x.getElements(t)),getNextEl:(t,n)=>jt(x.getElements(t),t.highlightedValue,n??t.loopFocus),getPrevEl:(t,n)=>zt(x.getElements(t),t.highlightedValue,n??t.loopFocus),getElemByKey:(t,n)=>qt(x.getElements(t),{state:t.typeaheadState,key:n,activeId:t.highlightedValue}),isTargetDisabled:t=>k(t)&&(t.dataset.disabled===""||t.hasAttribute("disabled")),isTriggerItem:t=>!!t?.getAttribute("role")?.startsWith("menuitem")&&!!t?.hasAttribute("aria-controls"),getOptionFromItemEl(t){return{id:t.id,name:t.dataset.name,value:t.dataset.value,valueText:t.dataset.valueText,type:t.dataset.type}}});function $e(t,n,e){let i=t.context.isSubmenu,r=t.context.isTypingAhead,o=t.context.composite,s=t.hasTag("open"),a=Ei({...t.context.positioning,placement:t.context.anchorPoint?"bottom":t.context.currentPlacement});function u(c){return{disabled:!!c.disabled,highlighted:t.context.highlightedValue===c.value}}function l(c){let f=c.valueText??c.value;return{...c,id:c.value,valueText:f}}function d(c){return{...u(l(c)),checked:!!c.checked}}function h(c){let{value:f,closeOnSelect:g,valueText:y}=c,m=u(c);return e.element({..._.item.attrs,id:f,role:"menuitem","aria-disabled":m.disabled,"data-disabled":V(m.disabled),"data-ownedby":x.getContentId(t.context),"data-highlighted":V(m.highlighted),"data-valuetext":y,onDragStart(p){p.currentTarget.matches("a[href]")&&p.preventDefault()},onPointerMove(p){if(m.disabled||p.pointerType!=="mouse")return;let E=p.currentTarget;m.highlighted||n({type:"ITEM_POINTERMOVE",id:f,target:E,closeOnSelect:g})},onPointerLeave(p){if(m.disabled||p.pointerType!=="mouse"||!t.previousEvent.type.includes("POINTER"))return;let w=p.currentTarget;n({type:"ITEM_POINTERLEAVE",id:f,target:w,closeOnSelect:g})},onPointerDown(p){if(m.disabled)return;let E=p.currentTarget;n({type:"ITEM_POINTERDOWN",target:E,id:f,closeOnSelect:g})},onPointerUp(p){if(Pe(p)||Te(p)||m.disabled||!ee(p))return;let E=p.currentTarget;n({type:"ITEM_CLICK",src:"pointerup",target:E,id:f,closeOnSelect:g}),p.pointerType==="touch"&&Ie(E)},onTouchEnd(p){p.preventDefault(),p.stopPropagation()}})}return{highlightedValue:t.context.highlightedValue,open:s,setOpen(c){c!==s&&n(c?"OPEN":"CLOSE")},setHighlightedValue(c){n({type:"HIGHLIGHTED.SET",id:c})},setParent(c){n({type:"PARENT.SET",value:c,id:c.state.context.id})},setChild(c){n({type:"CHILD.SET",value:c,id:c.state.context.id})},reposition(c={}){n({type:"POSITIONING.SET",options:c})},contextTriggerProps:e.element({..._.contextTrigger.attrs,dir:t.context.dir,id:x.getContextTriggerId(t.context),onPointerDown(c){if(c.pointerType==="mouse")return;let f=Rt(c),g=ie(f);n({type:"CONTEXT_MENU_START",point:g})},onPointerCancel(c){c.pointerType!=="mouse"&&n("CONTEXT_MENU_CANCEL")},onPointerMove(c){c.pointerType!=="mouse"&&n("CONTEXT_MENU_CANCEL")},onPointerUp(c){c.pointerType!=="mouse"&&n("CONTEXT_MENU_CANCEL")},onContextMenu(c){let f=Rt(c),g=ie(f);n({type:"CONTEXT_MENU",point:g}),c.preventDefault()},style:{WebkitTouchCallout:"none",userSelect:"none"}}),getTriggerItemProps(c){return Mn(h({value:c.triggerProps.id}),c.triggerProps)},triggerProps:e.button({...i?_.triggerItem.attrs:_.trigger.attrs,"data-placement":t.context.currentPlacement,type:"button",dir:t.context.dir,id:x.getTriggerId(t.context),"data-uid":t.context.id,"aria-haspopup":o?"menu":"dialog","aria-controls":x.getContentId(t.context),"aria-expanded":s||void 0,"data-state":s?"open":"closed",onPointerMove(c){c.pointerType!=="mouse"||x.isTargetDisabled(c.currentTarget)||!i||n({type:"TRIGGER_POINTERMOVE",target:c.currentTarget})},onPointerLeave(c){if(c.pointerType!=="mouse")return;let f=Rt(c);if(x.isTargetDisabled(c.currentTarget)||!i)return;let y=ie(f);n({type:"TRIGGER_POINTERLEAVE",target:c.currentTarget,point:y})},onClick(c){x.isTriggerItem(c.currentTarget)&&n({type:"TRIGGER_CLICK",target:c.currentTarget})},onPointerDown(c){let f=x.isTargetDisabled(c.currentTarget),g=Rt(c);!ee(g)||f||ne(c)||(c.preventDefault(),x.isTriggerItem(c.currentTarget)||n({type:"TRIGGER_CLICK",target:c.currentTarget}))},onBlur(){n("TRIGGER_BLUR")},onFocus(){n("TRIGGER_FOCUS")},onKeyDown(c){if(c.defaultPrevented)return;let f={ArrowDown(){n("ARROW_DOWN")},ArrowUp(){n("ARROW_UP")},Enter(){n({type:"ARROW_DOWN",src:"enter"})},Space(){n({type:"ARROW_DOWN",src:"space"})}},g=kt(c,t.context),y=f[g];y&&(c.preventDefault(),y(c))}}),indicatorProps:e.element({..._.indicator.attrs,dir:t.context.dir,"data-state":s?"open":"closed"}),positionerProps:e.element({..._.positioner.attrs,dir:t.context.dir,id:x.getPositionerId(t.context),style:a.floating}),arrowProps:e.element({id:x.getArrowId(t.context),..._.arrow.attrs,dir:t.context.dir,style:a.arrow}),arrowTipProps:e.element({..._.arrowTip.attrs,dir:t.context.dir,style:a.arrowTip}),contentProps:e.element({..._.content.attrs,id:x.getContentId(t.context),"aria-label":t.context["aria-label"],hidden:!s,"data-state":s?"open":"closed",role:o?"menu":"dialog",tabIndex:0,dir:t.context.dir,"aria-activedescendant":t.context.highlightedValue??void 0,"aria-labelledby":x.getTriggerId(t.context),"data-placement":t.context.currentPlacement,onPointerEnter(c){c.pointerType==="mouse"&&n("MENU_POINTERENTER")},onKeyDown(c){if(c.defaultPrevented)return;let f=Rt(c);if(!Ze(f))return;let g=Z(f);if(!(g?.closest("[role=menu]")===c.currentTarget||g===c.currentTarget))return;if(c.key==="Tab"&&!nn(c)){c.preventDefault();return}let m=x.getHighlightedItemEl(t.context),p={ArrowDown(){n("ARROW_DOWN")},ArrowUp(){n("ARROW_UP")},ArrowLeft(){n("ARROW_LEFT")},ArrowRight(){n("ARROW_RIGHT")},Enter(){n("ENTER"),Ie(m)},Space(O){r?n({type:"TYPEAHEAD",key:O.key}):p.Enter?.(O)},Home(){n("HOME")},End(){n("END")}},E=kt(c,{dir:t.context.dir}),w=p[E];if(w){w(c),c.stopPropagation(),c.preventDefault();return}t.context.typeahead&&ln(c)&&(un(c)||Zt(g)||(n({type:"TYPEAHEAD",key:c.key}),c.preventDefault()))}}),separatorProps:e.element({..._.separator.attrs,role:"separator",dir:t.context.dir,"aria-orientation":"horizontal"}),getItemState:u,getItemProps:h,getOptionItemState:d,getOptionItemProps(c){let{type:f,disabled:g,onCheckedChange:y,closeOnSelect:m}=c,p=l(c),E=d(c);return{...h(p),...e.element({"data-type":f,..._.item.attrs,dir:t.context.dir,"data-value":p.value,role:`menuitem${f}`,"aria-checked":!!E.checked,"data-state":E.checked?"checked":"unchecked",onPointerUp(w){if(!ee(w)||g||Pe(w)||Te(w))return;let O=w.currentTarget;n({type:"ITEM_CLICK",src:"pointerup",target:O,option:p,closeOnSelect:m}),y?.(!E.checked)}})}},getItemIndicatorProps(c){let f=d(c);return e.element({..._.itemIndicator.attrs,dir:t.context.dir,"data-disabled":V(f.disabled),"data-highlighted":V(f.highlighted),"data-state":f.checked?"checked":"unchecked",hidden:!f.checked})},getItemTextProps(c){let f=d(c);return e.element({..._.itemText.attrs,dir:t.context.dir,"data-disabled":V(f.disabled),"data-highlighted":V(f.highlighted),"data-state":f.checked?"checked":"unchecked"})},getItemGroupLabelProps(c){return e.element({id:x.getGroupLabelId(t.context,c.htmlFor),dir:t.context.dir,..._.itemGroupLabel.attrs})},getItemGroupProps(c){return e.element({id:x.getGroupId(t.context,c.id),..._.itemGroup.attrs,dir:t.context.dir,"aria-labelledby":x.getGroupLabelId(t.context,c.id),role:"group"})}}}var{not:X,and:St,or:$o}=he;function Ci(t){let n=yt(t);return ge({id:"menu",initial:n.open?"open":"idle",context:{highlightedValue:null,loopFocus:!1,anchorPoint:null,closeOnSelect:!0,typeahead:!0,composite:!0,...n,positioning:{placement:"bottom-start",gutter:8,...n.positioning},intentPolygon:null,parent:null,lastHighlightedValue:null,children:pn(ut({})),suspendPointer:!1,restoreFocus:!0,typeaheadState:qt.defaultOptions},computed:{isSubmenu:e=>e.parent!==null,isRtl:e=>e.dir==="rtl",isTypingAhead:e=>e.typeaheadState.keysSoFar!==""},watch:{isSubmenu:"setSubmenuPlacement",anchorPoint:"reposition",open:"toggleVisibility"},on:{"PARENT.SET":{actions:"setParentMenu"},"CHILD.SET":{actions:"setChildMenu"},OPEN:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}],OPEN_AUTOFOCUS:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{internal:!0,target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],CLOSE:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}],"HIGHLIGHTED.RESTORE":{actions:"restoreHighlightedItem"},"HIGHLIGHTED.SET":{actions:"setHighlightedItem"}},states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}],TRIGGER_FOCUS:{guard:X("isSubmenu"),target:"closed"},TRIGGER_POINTERMOVE:{guard:"isSubmenu",target:"opening"}}},"opening:contextmenu":{tags:["closed"],after:{LONG_PRESS_DELAY:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",CONTEXT_MENU_CANCEL:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}]}},opening:{tags:["closed"],after:{SUBMENU_OPEN_DELAY:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",BLUR:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}],TRIGGER_POINTERLEAVE:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}]}},closing:{tags:["open"],activities:["trackPointerMove","trackInteractOutside"],after:{SUBMENU_CLOSE_DELAY:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["focusParentMenu","restoreParentHiglightedItem","invokeOnClose"]}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":{target:"closed",actions:["focusParentMenu","restoreParentHiglightedItem"]},MENU_POINTERENTER:{target:"open",actions:"clearIntentPolygon"},POINTER_MOVED_AWAY_FROM_SUBMENU:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:["focusParentMenu","restoreParentHiglightedItem"]}]}},closed:{tags:["closed"],entry:["clearHighlightedItem","focusTrigger","clearAnchorPoint","resumePointer"],on:{"CONTROLLED.OPEN":[{guard:$o("isOpenAutoFocusEvent","isArrowDownEvent"),target:"open",actions:"highlightFirstItem"},{guard:"isArrowUpEvent",target:"open",actions:"highlightLastItem"},{target:"open"}],CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}],TRIGGER_POINTERMOVE:{guard:"isTriggerItem",target:"opening"},TRIGGER_BLUR:"idle",ARROW_DOWN:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],ARROW_UP:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:["highlightLastItem","invokeOnOpen"]}]}},open:{tags:["open"],activities:["trackInteractOutside","trackPositioning","scrollToHighlightedItem"],entry:["focusMenu","resumePointer"],on:{"CONTROLLED.CLOSE":[{target:"closed",guard:"isArrowLeftEvent",actions:["focusParentMenu"]},{target:"closed"}],TRIGGER_CLICK:[{guard:St(X("isTriggerItem"),"isOpenControlled"),actions:"invokeOnClose"},{guard:X("isTriggerItem"),target:"closed",actions:"invokeOnClose"}],ARROW_UP:{actions:["highlightPrevItem","focusMenu"]},ARROW_DOWN:{actions:["highlightNextItem","focusMenu"]},ARROW_LEFT:[{guard:St("isSubmenu","isOpenControlled"),actions:"invokeOnClose"},{guard:"isSubmenu",target:"closed",actions:["focusParentMenu","invokeOnClose"]}],HOME:{actions:["highlightFirstItem","focusMenu"]},END:{actions:["highlightLastItem","focusMenu"]},ARROW_RIGHT:{guard:"isTriggerItemHighlighted",actions:"openSubmenu"},ENTER:[{guard:"isTriggerItemHighlighted",actions:"openSubmenu"},{guard:St("closeOnSelect","isOpenControlled"),actions:["clickHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"closed",actions:"clickHighlightedItem"},{actions:"clickHighlightedItem"}],ITEM_POINTERMOVE:[{guard:X("suspendPointer"),actions:["setHighlightedItem","focusMenu"]},{actions:"setLastHighlightedItem"}],ITEM_POINTERLEAVE:{guard:St(X("suspendPointer"),X("isTriggerItem")),actions:"clearHighlightedItem"},ITEM_CLICK:[{guard:St(X("isTriggerItemHighlighted"),X("isHighlightedItemEditable"),"closeOnSelect","isOpenControlled"),actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:St(X("isTriggerItemHighlighted"),X("isHighlightedItemEditable"),"closeOnSelect"),target:"closed",actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:St(X("isTriggerItemHighlighted"),X("isHighlightedItemEditable")),actions:["invokeOnSelect","setOptionState"]},{actions:"setHighlightedItem"}],TRIGGER_POINTERLEAVE:{target:"closing",actions:"setIntentPolygon"},ITEM_POINTERDOWN:{actions:"setHighlightedItem"},TYPEAHEAD:{actions:"highlightMatchedItem"},FOCUS_MENU:{actions:"focusMenu"},"POSITIONING.SET":{actions:"reposition"}}}}},{delays:{LONG_PRESS_DELAY:700,SUBMENU_OPEN_DELAY:100,SUBMENU_CLOSE_DELAY:100},guards:{closeOnSelect:(e,i)=>!!(i?.closeOnSelect??e.closeOnSelect),isTriggerItem:(e,i)=>x.isTriggerItem(i.target),isTriggerItemHighlighted:(e,i)=>!!(i.target??x.getHighlightedItemEl(e))?.hasAttribute("aria-controls"),isSubmenu:e=>e.isSubmenu,suspendPointer:e=>e.suspendPointer,isHighlightedItemEditable:e=>Zt(x.getHighlightedItemEl(e)),isWithinPolygon:(e,i)=>e.intentPolygon?Ri(e.intentPolygon,i.point):!1,isOpenControlled:e=>!!e["open.controlled"],isArrowLeftEvent:(e,i)=>i.previousEvent?.type==="ARROW_LEFT",isArrowUpEvent:(e,i)=>i.previousEvent?.type==="ARROW_UP",isArrowDownEvent:(e,i)=>i.previousEvent?.type==="ARROW_DOWN",isOpenAutoFocusEvent:(e,i)=>i.previousEvent?.type==="OPEN_AUTOFOCUS"},activities:{trackPositioning(e){if(e.anchorPoint)return;e.currentPlacement=e.positioning.placement;let i=()=>x.getPositionerEl(e);return Ge(x.getTriggerEl(e),i,{...e.positioning,defer:!0,onComplete(r){e.currentPlacement=r.placement}})},trackInteractOutside(e,i,{send:r}){return Si(()=>x.getContentEl(e),{defer:!0,exclude:[x.getTriggerEl(e)],onInteractOutside:e.onInteractOutside,onFocusOutside:e.onFocusOutside,onEscapeKeyDown(s){e.onEscapeKeyDown?.(s),e.isSubmenu&&s.preventDefault(),Ii(e)},onPointerDownOutside(s){e.restoreFocus=!s.detail.focusable,e.onPointerDownOutside?.(s)},onDismiss(){r({type:"CLOSE",src:"interact-outside"})}})},trackPointerMove(e,i,{guards:r,send:o}){let{isWithinPolygon:s}=r;e.parent.state.context.suspendPointer=!0;let a=x.getDoc(e);return mt(a,"pointermove",u=>{let l={x:u.clientX,y:u.clientY};s(e,{point:l})||(o("POINTER_MOVED_AWAY_FROM_SUBMENU"),e.parent.state.context.suspendPointer=!1)})},scrollToHighlightedItem(e,i,{getState:r}){let o=()=>{if(r().event.type.startsWith("ITEM_POINTER"))return;let u=x.getHighlightedItemEl(e),l=x.getContentEl(e);on(u,{rootEl:l,block:"nearest"})};return B(()=>o()),rn(()=>x.getContentEl(e),{defer:!0,attributes:["aria-activedescendant"],callback:o})}},actions:{setAnchorPoint(e,i){e.anchorPoint=i.point},clearAnchorPoint(e){e.anchorPoint=null},setSubmenuPlacement(e){e.isSubmenu&&(e.positioning.placement=e.isRtl?"left-start":"right-start",e.positioning.gutter=0)},reposition(e,i){let r=()=>x.getPositionerEl(e),o=e.anchorPoint?()=>({width:0,height:0,...e.anchorPoint}):void 0;Ge(x.getTriggerEl(e),r,{...e.positioning,getAnchorRect:o,...i.options??{},listeners:!1,onComplete(s){e.currentPlacement=s.placement}})},setOptionState(e,i){if(!i.option)return;let{checked:r,onCheckedChange:o,type:s}=i.option;s==="radio"?o?.(!0):s==="checkbox"&&o?.(!r)},clickHighlightedItem(e,i,{send:r}){let o=x.getHighlightedItemEl(e);if(!o||o.dataset.disabled)return;let s=x.getOptionFromItemEl(o);r({type:"ITEM_CLICK",src:"enter",target:o,id:s.id,option:s,closeOnSelect:e.closeOnSelect})},setIntentPolygon(e,i){let r=x.getContentEl(e),o=e.currentPlacement;if(!r||!o)return;let s=r.getBoundingClientRect(),a=Ai(s,o);if(!a)return;let l=yi(o)==="right"?-5:5;e.intentPolygon=[{...i.point,x:i.point.x+l},...a]},clearIntentPolygon(e){e.intentPolygon=null},resumePointer(e){e.parent&&(e.parent.state.context.suspendPointer=!1)},setHighlightedItem(e,i){dt.highlighted(e,i.id)},clearHighlightedItem(e){dt.highlighted(e,null)},focusMenu(e){B(()=>{let i=x.getContentEl(e);if(J(i,x.getActiveElement(e)))return;(en(i,!1)||i)?.focus({preventScroll:!0})})},highlightFirstItem(e){let i=x.getFirstEl(e);i&&dt.highlighted(e,i.id)},highlightLastItem(e){let i=x.getLastEl(e);i&&dt.highlighted(e,i.id)},highlightNextItem(e,i){let r=x.getNextEl(e,i.loop);dt.highlighted(e,r?.id??null)},highlightPrevItem(e,i){let r=x.getPrevEl(e,i.loop);dt.highlighted(e,r?.id??null)},invokeOnSelect(e){e.highlightedValue&&e.onSelect?.({value:e.highlightedValue})},focusTrigger(e){e.isSubmenu||e.anchorPoint||!e.restoreFocus||B(()=>x.getTriggerEl(e)?.focus({preventScroll:!0}))},highlightMatchedItem(e,i){let r=x.getElemByKey(e,i.key);r&&dt.highlighted(e,r.id)},setParentMenu(e,i){e.parent=ut(i.value)},setChildMenu(e,i){e.children[i.id]=ut(i.value)},closeRootMenu(e){Ii(e)},openSubmenu(e){let r=x.getHighlightedItemEl(e)?.getAttribute("data-uid");(r?e.children[r]:null)?.send("OPEN_AUTOFOCUS")},focusParentMenu(e){e.parent?.send("FOCUS_MENU")},setLastHighlightedItem(e,i){e.lastHighlightedValue=i.id},restoreHighlightedItem(e){e.lastHighlightedValue&&(dt.highlighted(e,e.lastHighlightedValue),e.lastHighlightedValue=null)},restoreParentHiglightedItem(e){e.parent?.send("HIGHLIGHTED.RESTORE")},invokeOnOpen(e){e.onOpenChange?.({open:!0})},invokeOnClose(e){e.onOpenChange?.({open:!1})},toggleVisibility(e,i,{send:r}){r({type:e.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:i})}}})}function Ii(t){let n=t.parent;for(;n&&n.state.context.isSubmenu;)n=n.state.context.parent;n?.send("CLOSE")}var dt={highlighted(t,n){It(t.highlightedValue,n)||(t.highlightedValue=n,t.onHighlightChange?.({highlightedValue:n}))}},Ko=rt()(["anchorPoint","aria-label","closeOnSelect","dir","getRootNode","highlightedValue","id","ids","loopFocus","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onEscapeKeyDown","onSelect","onHighlightChange","open","open.controlled","positioning","typeahead","composite"]),Mc=nt(Ko),Xo=rt()(["closeOnSelect","disabled","value","valueText"]),Lc=nt(Xo),Uo=rt()(["htmlFor"]),Nc=nt(Uo),jo=rt()(["id"]),kc=nt(jo),zo=rt()(["disabled","valueText","closeOnSelect","type","value","checked","onCheckedChange"]),Dc=nt(zo);var Mi={mounted(){this.context={id:this.el.id},this.service=Ci(this.context),this.api=$e(this.service.state,this.service.send,Ct),this.render(),this.service.subscribe(()=>{this.api=$e(this.service.state,this.service.send,Ct),this.render()}),this.service.start()},updated(){this.render()},beforeDestroy(){this.service.stop()},labels(){return Array.from(this.el.querySelectorAll("[data-part='label']"))},groups(){return Array.from(this.el.querySelectorAll("[data-part='group']"))},separators(){return Array.from(this.el.querySelectorAll("[data-part='separator']"))},items(){return Array.from(this.el.querySelectorAll("[data-part='item']"))},render(){let t=this.el.querySelector("[data-part='trigger']"),n=this.el.querySelector("[data-part='positioner']"),e=this.el.querySelector("[data-part='content']");t&&W(t,this.api.triggerProps),n&&W(n,this.api.positionerProps),e&&W(e,this.api.contentProps),this.labels().forEach(i=>{W(i,this.api.getItemGroupLabelProps({htmlFor:i.dataset.for}))}),this.groups().forEach(i=>{W(i,this.api.getItemGroupProps({id:i.id}))}),this.separators().forEach(i=>W(i,this.api.separatorProps)),this.items().forEach(i=>{W(i,this.api.getItemProps({value:i.id}))})}};var Wc={Accordion:Vn,Menu:Mi};export{Vn as Accordion,Wc as Hooks,Mi as Menu};
//# sourceMappingURL=guillotine.mjs.map
